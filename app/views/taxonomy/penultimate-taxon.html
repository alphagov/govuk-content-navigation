{% extends "layout.html" %}
{% import "taxonomy/content-list-macro.html" as content_list_macro %}
{% import "breadcrumb-macro.html" as breadcrumb_macro %}

{% block page_title %}
  GOV.UK Content Navigation prototype
{% endblock %}

{% block content %}

  <main id="content" class="taxonomy" role="main">
    {{ breadcrumb_macro.render_breadcrumb(presentedTaxon.breadcrumb) }}

    {% include 'taxonomy/_taxon-heading.html' %}

    {% if presentedTaxon.children.length > 0 %}
    <h3>In this section</h3>

    <nav role="navigation">
      <ul class="dash-list">
        <li class="current-topic"><a href="#topic-01">{{ presentedTaxon.title }}</a></li>
        {% for childTaxon in presentedTaxon.children %}
          {% if childTaxon.guidance.atozContent().length > 0 %}
          <li class="child-topic"><a href="#topic-{{ (loop.index + 1) | pad(2, '0') }}">{{ childTaxon.title }}</a></li>
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
    {% endif %}

    <div class="grid-row child-topic-contents">
      <div class="column-two-thirds">
        <div class="topic-content">
          <a name="topic-01"></a>
          {{ content_list_macro.content_list(presentedTaxon, presentedTaxon.content.guidance.atozContent(), true) }}

          {% for childTaxon in presentedTaxon.children %}
            <a name="topic-{{ (loop.index + 1) | pad(2, '0') }}"></a>
            {{ content_list_macro.content_list(childTaxon, childTaxon.guidance.atozContent(), true) }}
          {% endfor %}
        </div>
      </div>
    </div>
  </main>
{% endblock %}
